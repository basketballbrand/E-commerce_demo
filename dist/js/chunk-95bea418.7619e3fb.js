(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-95bea418"],{"05ad":function(t,e,c){},"1dde":function(t,e,c){var i=c("d039"),l=c("b622"),a=c("2d00"),s=l("species");t.exports=function(t){return a>=51||!i((function(){var e=[],c=e.constructor={};return c[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"6d29":function(t,e,c){"use strict";c("05ad")},8418:function(t,e,c){"use strict";var i=c("c04e"),l=c("9bf2"),a=c("5c6c");t.exports=function(t,e,c){var s=i(e);s in t?l.f(t,s,a(0,c)):t[s]=c}},"99af":function(t,e,c){"use strict";var i=c("23e7"),l=c("d039"),a=c("e8b5"),s=c("861d"),n=c("7b0b"),o=c("50c4"),r=c("8418"),u=c("65f0"),b=c("1dde"),d=c("b622"),O=c("2d00"),j=d("isConcatSpreadable"),p=9007199254740991,f="Maximum allowed index exceeded",m=O>=51||!l((function(){var t=[];return t[j]=!1,t.concat()[0]!==t})),h=b("concat"),v=function(t){if(!s(t))return!1;var e=t[j];return void 0!==e?!!e:a(t)},y=!m||!h;i({target:"Array",proto:!0,forced:y},{concat:function(t){var e,c,i,l,a,s=n(this),b=u(s,0),d=0;for(e=-1,i=arguments.length;e<i;e++)if(a=-1===e?s:arguments[e],v(a)){if(l=o(a.length),d+l>p)throw TypeError(f);for(c=0;c<l;c++,d++)c in a&&r(b,d,a[c])}else{if(d>=p)throw TypeError(f);r(b,d++,a)}return b.length=d,b}})},a0d8:function(t,e,c){"use strict";c.r(e);c("b0c0");var i=c("7a23"),l=Object(i["S"])("data-v-e3a17ddc");Object(i["x"])("data-v-e3a17ddc");var a={class:"container my-5 py-4"},s={class:"stepper"},n={key:0,class:"cart_empty"},o=Object(i["i"])("h5",null,"購物車目前沒有商品",-1),r={key:1,class:"my-5 justify-content-center row"},u={class:"my-5 col-9"},b={class:"table align-middle"},d=Object(i["i"])("thead",null,[Object(i["i"])("tr",null,[Object(i["i"])("th",null,"商品資訊"),Object(i["i"])("th",null,"價格"),Object(i["i"])("th",null,"數量"),Object(i["i"])("th",null,"小計"),Object(i["i"])("th")])],-1),O={class:"d-flex align-items-center"},j={class:"me-3"},p={class:"input-group input-group-sm"},f={class:"input-group-text"},m={key:0,class:"text-success"},h=Object(i["i"])("i",{class:"bi bi-x-lg"},null,-1),v={class:"text-center"},y=Object(i["i"])("i",{class:"bi bi-trash"},null,-1),g=Object(i["h"])("刪除全部商品 "),_={class:"ord_info my-5 col-3"},x=Object(i["i"])("h5",null,"訂單資訊",-1),k=Object(i["i"])("p",null,[Object(i["i"])("i",{class:"bi bi-truck"}),Object(i["h"])("單筆滿 $2000 享免運。")],-1),w={key:0},$=Object(i["i"])("span",{class:"title"},"小計：",-1),G={class:"price"},V={key:1,class:"text-success"},S=Object(i["i"])("span",{class:"title"},"小計：",-1),C={class:"price"},L=Object(i["i"])("span",{class:"title"},"運費：",-1),I={class:"price"},q={key:2,class:"text-danger"},U=Object(i["i"])("span",{class:"title"},"單筆滿 $2000 享免運",-1),T=Object(i["i"])("br",null,null,-1),E=Object(i["i"])("span",null," - NT $ 100",-1),N={class:"input-group mb-3 input-group input-group-sm"},A=Object(i["i"])("p",{class:"coupons_code"},[Object(i["h"])(" 輸入 "),Object(i["i"])("span",{class:"text-success"},"coupons"),Object(i["h"])(" 將享有五折的優惠 ")],-1),D=Object(i["i"])("hr",null,null,-1),M={class:"d-flex justify-content-between align-items-center"},P=Object(i["i"])("p",{class:"title"},"總金額",-1),B={class:"price"},F={key:0},Q={key:1},J={class:"text-center"},R={key:2,class:"my-5 row justify-content-center info_form"},z={class:"mb-3"},H=Object(i["i"])("label",{for:"email",class:"form-label"},"付款方式",-1),K=Object(i["i"])("option",{value:""},"請選擇付款方式",-1),W=Object(i["i"])("option",{value:"信用卡一次付清"},"信用卡一次付清",-1),X=Object(i["i"])("option",{value:"超商取貨付款"},"超商取貨付款",-1),Y=Object(i["i"])("option",{value:"ATM轉帳"},"ATM轉帳",-1),Z=Object(i["i"])("option",{value:"LINE Pay"},"LINE Pay",-1),tt=Object(i["i"])("option",{value:"Apple Pay"},"Apple Pay",-1),et={class:"mb-3"},ct=Object(i["i"])("label",{for:"email",class:"form-label"},"配送方式",-1),it=Object(i["i"])("option",{value:""},"請選擇配送方式",-1),lt=Object(i["i"])("option",{value:"宅配"},"宅配",-1),at=Object(i["i"])("option",{value:"超商取貨"},"超商取貨",-1),st={class:"mb-3"},nt=Object(i["i"])("label",{for:"email",class:"form-label"},"Email",-1),ot={class:"mb-3"},rt=Object(i["i"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),ut={class:"mb-3"},bt=Object(i["i"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),dt={class:"mb-3"},Ot=Object(i["i"])("label",{for:"address",class:"form-label"},"收件人地址",-1),jt={class:"mb-3"},pt=Object(i["i"])("label",{for:"message",class:"form-label"},"留言",-1),ft={class:"text-end d-flex justify-content-between"},mt=Object(i["i"])("button",{class:"ui_btn"},"提交訂單",-1),ht={key:3,class:"my-5 row justify-content-center order_form"},vt=Object(i["i"])("h5",{class:"text-center mt-5 mb-4"},"訂單資訊",-1),yt={class:"table align-middle"},gt=Object(i["i"])("thead",null,[Object(i["i"])("th",null,"品名"),Object(i["i"])("th",null,"數量"),Object(i["i"])("th",null,"單價")],-1),_t={key:0,class:"text-success"},xt=Object(i["i"])("td",{colspan:"2",class:"text-end"},"小計",-1),kt={class:"text-end"},wt=Object(i["i"])("td",{colspan:"2",class:"text-end"},"運費",-1),$t={class:"text-end"},Gt=Object(i["i"])("td",{colspan:"2",class:"text-end"},"總計",-1),Vt={class:"text-end"},St=Object(i["i"])("h5",{class:"text-center mt-5 mb-4"},"收件人資訊",-1),Ct={class:"table"},Lt=Object(i["i"])("th",null,"付款方式",-1),It=Object(i["i"])("th",null,"配送方式",-1),qt=Object(i["i"])("th",null,"Email",-1),Ut=Object(i["i"])("th",null,"姓名",-1),Tt=Object(i["i"])("th",null,"收件人電話",-1),Et=Object(i["i"])("th",null,"收件人地址",-1),Nt=Object(i["i"])("th",null,"付款狀態",-1),At={key:0},Dt={key:1,class:"text-success"},Mt={class:"mt-3 text-center"},Pt={key:0,class:"ui_btn"};Object(i["v"])();var Bt=l((function(t,e,c,Bt,Ft,Qt){var Jt=Object(i["D"])("Loading"),Rt=Object(i["D"])("Field"),zt=Object(i["D"])("ErrorMessage"),Ht=Object(i["D"])("Form");return Object(i["u"])(),Object(i["e"])(i["a"],null,[Object(i["i"])(Jt,{active:Ft.isLoading},null,8,["active"]),Object(i["i"])("div",a,[Object(i["i"])("ul",s,[Object(i["i"])("li",{class:["step_item",{active:Ft.status.isShow}]},"購物車",2),Object(i["i"])("li",{class:["step_item",{active:!Ft.status.isShow&&""==Ft.orderId}]}," 付款及運送 ",2),Object(i["i"])("li",{class:["step_item",{active:""!==Ft.orderId}]},"訂單確認",2)]),0==Ft.cartlist.total?(Object(i["u"])(),Object(i["e"])("div",n,[o,Object(i["i"])("a",{href:"#",class:"ui_btn",onClick:e[1]||(e[1]=Object(i["R"])((function(e){return t.$router.push("/demo/prodlist")}),["prevent"]))},"前往購物")])):Object(i["f"])("",!0),Ft.status.isShow&&0!==Ft.cartlist.total?(Object(i["u"])(),Object(i["e"])("div",r,[Object(i["i"])("div",u,[Object(i["i"])("table",b,[d,Object(i["i"])("tbody",null,[(Object(i["u"])(!0),Object(i["e"])(i["a"],null,Object(i["B"])(Ft.cartlist.carts,(function(e){return Object(i["u"])(),Object(i["e"])("tr",{key:e.id},[Object(i["i"])("td",null,[Object(i["i"])("ul",O,[Object(i["i"])("li",j,[Object(i["i"])("img",{src:e.product.imageUrl,alt:""},null,8,["src"])]),Object(i["i"])("li",null,Object(i["G"])(e.product.title),1)])]),Object(i["i"])("td",null,"$ "+Object(i["G"])(t.$filters.currency(e.product.price)),1),Object(i["i"])("td",null,[Object(i["i"])("div",p,[Object(i["Q"])(Object(i["i"])("input",{type:"number",class:"form-control",min:"1",onChange:function(t){return Qt.updateCart(e)},"onUpdate:modelValue":function(t){return e.qty=t}},null,40,["onChange","onUpdate:modelValue"]),[[i["L"],e.qty,void 0,{number:!0}]]),Object(i["i"])("div",f,Object(i["G"])(e.product.unit),1)])]),Object(i["i"])("td",null,[Object(i["i"])("ul",null,[Object(i["i"])("li",{class:{"text-decoration-line-through":Ft.cartlist.final_total!==Ft.cartlist.total}}," $ "+Object(i["G"])(t.$filters.currency(e.total)),3),Object(i["i"])("li",null,[Ft.cartlist.final_total!==Ft.cartlist.total?(Object(i["u"])(),Object(i["e"])("div",m," 折扣價：$ "+Object(i["G"])(e.final_total),1)):Object(i["f"])("",!0)])])]),Object(i["i"])("td",null,[Object(i["i"])("button",{type:"button",class:"btn btn-outline-dark btn-sm",onClick:function(t){return Qt.deleteitem(e.id)}},[h],8,["onClick"])])])})),128))])]),Object(i["i"])("div",v,[Object(i["i"])("button",{type:"button",class:"btn btn-outline-dark btn-sm",onClick:e[2]||(e[2]=function(){return Qt.deleteall&&Qt.deleteall.apply(Qt,arguments)}),disabled:0==Ft.cartlist.total},[y,g],8,["disabled"])])]),Object(i["i"])("div",_,[x,k,Object(i["i"])("ul",null,[Ft.cartlist.final_total==Ft.cartlist.total?(Object(i["u"])(),Object(i["e"])("li",w,[$,Object(i["i"])("span",G,"NT$ "+Object(i["G"])(Ft.cartlist.total),1)])):(Object(i["u"])(),Object(i["e"])("li",V,[S,Object(i["i"])("span",C,"NT$ "+Object(i["G"])(Ft.cartlist.final_total),1)])),Object(i["i"])("li",null,[L,Object(i["i"])("span",I,"NT$ "+Object(i["G"])(Qt.Shipping),1)]),Ft.cartlist.final_total>=2e3?(Object(i["u"])(),Object(i["e"])("li",q,[U,T,E])):Object(i["f"])("",!0),Object(i["i"])("li",null,[Object(i["i"])("div",N,[Object(i["Q"])(Object(i["i"])("input",{type:"text",class:"form-control",placeholder:"請輸入優惠碼","onUpdate:modelValue":e[3]||(e[3]=function(t){return Ft.coupon_code=t})},null,512),[[i["L"],Ft.coupon_code]]),Object(i["i"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[4]||(e[4]=function(){return Qt.addCouponcode&&Qt.addCouponcode.apply(Qt,arguments)})}," 輸入 ")]),A])]),D,Object(i["i"])("ul",null,[Object(i["i"])("li",M,[P,Object(i["i"])("div",B,[0==Ft.cartlist.total?(Object(i["u"])(),Object(i["e"])("span",F,"NT$ 0")):(Object(i["u"])(),Object(i["e"])("span",Q,"NT$ "+Object(i["G"])(Qt.final_total),1))])]),Object(i["i"])("li",J,[Object(i["i"])("button",{type:"button",class:"ui_btn my-3",disabled:0==Ft.cartlist.total,onClick:e[5]||(e[5]=function(t){return Ft.status.isShow=!Ft.status.isShow})}," 前往結帳 ",8,["disabled"])])])])])):Object(i["f"])("",!0),Ft.status.isShow||""!=Ft.orderId?Object(i["f"])("",!0):(Object(i["u"])(),Object(i["e"])("div",R,[Object(i["i"])(Ht,{class:"col-md-6",onSubmit:Qt.createOrder},{default:l((function(t){var c=t.errors;return[Object(i["i"])("div",z,[H,Object(i["i"])(Rt,{id:"payway",name:"付款方式",class:["form-control",{"is-invalid":c["付款方式"]}],rules:"required",as:"select",modelValue:Ft.form.user.payment_method,"onUpdate:modelValue":e[6]||(e[6]=function(t){return Ft.form.user.payment_method=t})},{default:l((function(){return[K,W,X,Y,Z,tt]})),_:2},1032,["class","modelValue"]),Object(i["i"])(zt,{name:"付款方式",class:"invalid-feedback"})]),Object(i["i"])("div",et,[ct,Object(i["i"])(Rt,{id:"deliveryway",name:"配送方式",class:["form-control",{"is-invalid":c["配送方式"]}],rules:"required",as:"select",modelValue:Ft.form.user.deliveryway,"onUpdate:modelValue":e[7]||(e[7]=function(t){return Ft.form.user.deliveryway=t})},{default:l((function(){return[it,lt,at]})),_:2},1032,["class","modelValue"]),Object(i["i"])(zt,{name:"配送方式",class:"invalid-feedback"})]),Object(i["i"])("div",st,[nt,Object(i["i"])(Rt,{id:"email",name:"email",type:"email",class:["form-control",{"is-invalid":c["email"]}],placeholder:"請輸入 Email",rules:"email|required",modelValue:Ft.form.user.email,"onUpdate:modelValue":e[8]||(e[8]=function(t){return Ft.form.user.email=t})},null,8,["class","modelValue"]),Object(i["i"])(zt,{name:"email",class:"invalid-feedback"})]),Object(i["i"])("div",ot,[rt,Object(i["i"])(Rt,{id:"name",name:"姓名",type:"text",class:["form-control",{"is-invalid":c["姓名"]}],placeholder:"請輸入姓名",rules:"required",modelValue:Ft.form.user.name,"onUpdate:modelValue":e[9]||(e[9]=function(t){return Ft.form.user.name=t})},null,8,["class","modelValue"]),Object(i["i"])(zt,{name:"姓名",class:"invalid-feedback"})]),Object(i["i"])("div",ut,[bt,Object(i["i"])(Rt,{id:"tel",name:"電話",type:"tel",class:["form-control",{"is-invalid":c["電話"]}],placeholder:"請輸入電話",rules:"required",modelValue:Ft.form.user.tel,"onUpdate:modelValue":e[10]||(e[10]=function(t){return Ft.form.user.tel=t})},null,8,["class","modelValue"]),Object(i["i"])(zt,{name:"電話",class:"invalid-feedback"})]),Object(i["i"])("div",dt,[Ot,Object(i["i"])(Rt,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":c["地址"]}],placeholder:"請輸入地址",rules:"required",modelValue:Ft.form.user.address,"onUpdate:modelValue":e[11]||(e[11]=function(t){return Ft.form.user.address=t})},null,8,["class","modelValue"]),Object(i["i"])(zt,{name:"地址",class:"invalid-feedback"})]),Object(i["i"])("div",jt,[pt,Object(i["Q"])(Object(i["i"])("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":e[12]||(e[12]=function(t){return Ft.form.message=t})},null,512),[[i["L"],Ft.form.message]])]),Object(i["i"])("div",ft,[Object(i["i"])("button",{type:"button",class:"ui_btn",disabled:0==Ft.cartlist.final_total,onClick:e[13]||(e[13]=function(t){return Ft.status.isShow=!Ft.status.isShow})}," 上一步 ",8,["disabled"]),mt])]})),_:1},8,["onSubmit"])])),""!==Ft.orderId?(Object(i["u"])(),Object(i["e"])("div",ht,[Object(i["i"])("form",{class:"col-md-6",onSubmit:e[15]||(e[15]=Object(i["R"])((function(){return Qt.payOrder&&Qt.payOrder.apply(Qt,arguments)}),["prevent"]))},[vt,Object(i["i"])("table",yt,[gt,Object(i["i"])("tbody",null,[(Object(i["u"])(!0),Object(i["e"])(i["a"],null,Object(i["B"])(Ft.order.products,(function(t){return Object(i["u"])(),Object(i["e"])("tr",{key:t.id},[Object(i["i"])("td",null,Object(i["G"])(t.product.title),1),Object(i["i"])("td",null,Object(i["G"])(t.qty)+"/"+Object(i["G"])(t.product.unit),1),Object(i["i"])("td",null,[Object(i["i"])("div",{class:{"text-decoration-line-through":Ft.cartlist.final_total!==Ft.cartlist.total}}," $ "+Object(i["G"])(t.total),3),t.final_total!==t.total?(Object(i["u"])(),Object(i["e"])("div",_t," 折扣價：$ "+Object(i["G"])(t.final_total),1)):Object(i["f"])("",!0)])])})),128))]),Object(i["i"])("tfoot",null,[Object(i["i"])("tr",null,[xt,Object(i["i"])("td",kt,Object(i["G"])(Ft.cartlist.final_total),1)]),Object(i["i"])("tr",null,[wt,Object(i["i"])("td",$t,Object(i["G"])(Qt.Shipping),1)]),Object(i["i"])("tr",null,[Gt,Object(i["i"])("td",Vt,Object(i["G"])(Qt.final_total),1)])])]),St,Object(i["i"])("table",Ct,[Object(i["i"])("tbody",null,[Object(i["i"])("tr",null,[Lt,Object(i["i"])("td",null,Object(i["G"])(Ft.order.user.payment_method),1)]),Object(i["i"])("tr",null,[It,Object(i["i"])("td",null,Object(i["G"])(Ft.order.user.deliveryway),1)]),Object(i["i"])("tr",null,[qt,Object(i["i"])("td",null,Object(i["G"])(Ft.order.user.email),1)]),Object(i["i"])("tr",null,[Ut,Object(i["i"])("td",null,Object(i["G"])(Ft.order.user.name),1)]),Object(i["i"])("tr",null,[Tt,Object(i["i"])("td",null,Object(i["G"])(Ft.order.user.tel),1)]),Object(i["i"])("tr",null,[Et,Object(i["i"])("td",null,Object(i["G"])(Ft.order.user.address),1)]),Object(i["i"])("tr",null,[Nt,Object(i["i"])("td",null,[Ft.order.is_paid?(Object(i["u"])(),Object(i["e"])("span",Dt,"付款完成")):(Object(i["u"])(),Object(i["e"])("span",At,"尚未付款"))])])])]),Object(i["i"])("div",Mt,[!1===Ft.order.is_paid?(Object(i["u"])(),Object(i["e"])("button",Pt," 確認付款去 ")):(Object(i["u"])(),Object(i["e"])("button",{key:1,class:"ui_btn",onClick:e[14]||(e[14]=function(e){return t.$router.push("/demo/prodlist")})}," 回商品頁 "))])],32)])):Object(i["f"])("",!0)])],64)})),Ft=(c("99af"),{data:function(){return{cartlist:[],form:{user:{name:"",email:"",tel:"",address:"",payment_method:"",deliveryway:""},message:""},isLoading:!1,status:{isShow:!0},orderId:"",order:{user:{}},coupon_code:""}},inject:["emitter"],computed:{Shipping:function(){return this.cartlist.final_total>=2e3?0:100},final_total:function(){return this.cartlist.final_total>=2e3?this.cartlist.final_total:this.cartlist.final_total+this.Shipping}},methods:{getcartlist:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("display_test","/cart");this.$http.get(e).then((function(e){t.isLoading=!1,t.cartlist=e.data.data,t.emitter.emit("sendcartlist",e.data.data),console.log(t.cartlist)}))},deleteitem:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("display_test","/cart/").concat(t);this.$http.delete(c).then((function(t){t.data.success&&e.getcartlist()}))},deleteall:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("display_test","/carts");this.$http.delete(e).then((function(e){e.data.success&&t.getcartlist()}))},updateCart:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("display_test","/cart/").concat(t.id),i={product_id:t.product_id,qty:t.qty};this.$http.put(c,{data:i}).then((function(t){t.data.success&&e.getcartlist()}))},createOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("display_test","/order");this.$http.post(e,{data:this.form}).then((function(e){e.data.success&&(t.orderId=e.data.orderId,t.getOrder())}))},getOrder:function(){var t=this;this.deleteall();var e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("display_test","/order/").concat(this.orderId);this.isLoading=!0,this.$http.get(e).then((function(e){t.isLoading=!1,e.data.success&&(t.order=e.data.order)}))},addCouponcode:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("display_test","/coupon"),c={code:this.coupon_code};this.isLoading=!0,this.$http.post(e,{data:c}).then((function(e){t.isLoading=!1,e.data.success&&t.getcartlist()}))},payOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("display_test","/pay/").concat(this.orderId);this.isLoading=!0,this.$http.post(e).then((function(e){t.isLoading=!1,e.data.success&&t.getOrder()}))}},created:function(){this.getcartlist()}});c("6d29");Ft.render=Bt,Ft.__scopeId="data-v-e3a17ddc";e["default"]=Ft},b0c0:function(t,e,c){var i=c("83ab"),l=c("9bf2").f,a=Function.prototype,s=a.toString,n=/^\s*function ([^ (]*)/,o="name";i&&!(o in a)&&l(a,o,{configurable:!0,get:function(){try{return s.call(this).match(n)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-95bea418.7619e3fb.js.map